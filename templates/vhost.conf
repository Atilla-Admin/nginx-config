{% if force-ssl %}
server {
	listen 80;
	server_name {{server-name}};
	return 301 https://{{server-name}}$request_uri;
}
{% endif %}

server {
	{% if force-ssl %}
	listen 443 ssl;
	{% elif use-ssl %}
	listen 443 ssl;
	listen 80;
	{% else %}
	listen 80;
	{% endif %}

	server_name	{{server-name}};

	{% if (force-ssl or use-ssl) %}
	ssl on;
	ssl_certificate_key {{ssl-path}}/{{key}};
	ssl_trusted_certificate {{ssl-path}}/{{trust-cert}};
	ssl_certificate {{ssl-path}}/{{cert}};
	{% endif %}

	access_log	{{log-path}}/access.log;
	error_log	{{log-path}}/error.log{% if log-debug%} debug{% endif %};

	location / {
		proxy_set_header Host $host;
		proxy_set_header X-Forwarded-For $remote_addr;
		proxy_pass	http://{{proxy-pass}}/;
	}
}
